apiVersion: contour.heptio.com/v1beta1
kind: IngressRoute
metadata:
  name: {{ template "wordpress.fullname" . }}-root-ingress
  namespace: default
spec:
  virtualhost:
    fqdn: {{ .Values.fqdn }}
    tls:
      secretName: {{ .Values.tls }}
  routes:
    - match: /
      delegate:
        name: {{ template "wordpress.fullname" . }}-ingress
        namespace: {{ .Values.namespace }}

---

apiVersion: contour.heptio.com/v1beta1
kind: IngressRoute
metadata:
  name: {{ template "wordpress.fullname" . }}-ingress

spec:
  routes:
    - match: /
      services:
        - name: {{ template "wordpress.fullname" . }}
          port: 80
